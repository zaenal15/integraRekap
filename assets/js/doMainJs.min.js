function setDefaultModal(){fillModalContent(defaultModals),$("#change-password-old-field").on("change",function(){checkPass(this,this.value,"individual")})}function todayDate(){yesterday=new Date,tomorrow=new Date,yesterday.setDate(yesterday.getDate()-1),tomorrow.setDate(tomorrow.getDate()+1),today=new Date,todayYMD=today.getFullYear()+"-"+padZero(today.getMonth()+1,2)+"-"+padZero(today.getDate(),2),todayYMDHIS=todayYMD+" "+padZero(today.getHours(),2)+":"+padZero(today.getMinutes(),2)+":"+padZero(today.getSeconds(),2),todayTime=padZero(today.getHours(),2)+":"+padZero(today.getMinutes(),2)+":"+padZero(today.getSeconds(),2),todayHour=padZero(today.getHours(),2)+":"+padZero(today.getMinutes(),2),todayDateText=dayNamesFull[today.getDay()]+", "+padZero(today.getDate(),2)+" "+monthNamesFull[today.getMonth()]+" "+today.getFullYear(),todayDateTimeText=todayDateText+" "+todayTime,todayDateHourText=todayDateText+" "+todayHour}function selectedDateConvert(e){selectedDate=new Date(e),selectedDateYMD=selectedDate.getFullYear()+"-"+padZero(selectedDate.getMonth()+1,2)+"-"+padZero(selectedDate.getDate(),2),selectedDateTime=padZero(selectedDate.getHours(),2)+":"+padZero(selectedDate.getMinutes(),2)+":"+padZero(selectedDate.getSeconds(),2),selectedDateYMDHIS=selectedDateYMD+" "+selectedDateTime,selectedDateText=dayNamesFull[selectedDate.getDay()]+", "+padZero(selectedDate.getDate(),2)+" "+monthNamesFull[selectedDate.getMonth()]+" "+selectedDate.getFullYear(),selectedDateTimeText=selectedDateText+" "+selectedDateTime}function returnSelectedDateConvert(e,t){return"0000-00-00"==e?"-":(selectedDate=new Date(e),"ym"==t?selectedDate.getFullYear()+"-"+padZero(selectedDate.getMonth()+1,2):"ymd"==t?selectedDate.getFullYear()+"-"+padZero(selectedDate.getMonth()+1,2)+"-"+padZero(selectedDate.getDate(),2):"time"==t?padZero(selectedDate.getHours(),2)+":"+padZero(selectedDate.getMinutes(),2)+":"+padZero(selectedDate.getSeconds(),2):"hi"==t?padZero(selectedDate.getHours(),2)+":"+padZero(selectedDate.getMinutes(),2):"ymdhis"==t?selectedDate.getFullYear()+"-"+padZero(selectedDate.getMonth()+1,2)+"-"+padZero(selectedDate.getDate(),2)+" "+padZero(selectedDate.getHours(),2)+":"+padZero(selectedDate.getMinutes(),2)+":"+padZero(selectedDate.getSeconds(),2):"ymText"==t?monthNamesFull[selectedDate.getMonth()]+" "+selectedDate.getFullYear():"ymdText"==t?dayNamesFull[selectedDate.getDay()]+", "+padZero(selectedDate.getDate(),2)+" "+monthNamesFull[selectedDate.getMonth()]+" "+selectedDate.getFullYear():"ymdTextShort"==t?dayNames[selectedDate.getDay()]+", "+padZero(selectedDate.getDate(),2)+" "+monthNames[selectedDate.getMonth()]+" "+selectedDate.getFullYear():"ymdhisText"==t?dayNamesFull[selectedDate.getDay()]+", "+padZero(selectedDate.getDate(),2)+" "+monthNamesFull[selectedDate.getMonth()]+" "+selectedDate.getFullYear()+" "+padZero(selectedDate.getHours(),2)+":"+padZero(selectedDate.getMinutes(),2)+":"+padZero(selectedDate.getSeconds(),2):"ymdhisTextShort"==t?dayNames[selectedDate.getDay()]+", "+padZero(selectedDate.getDate(),2)+" "+monthNames[selectedDate.getMonth()]+" "+selectedDate.getFullYear()+" "+padZero(selectedDate.getHours(),2)+":"+padZero(selectedDate.getMinutes(),2)+":"+padZero(selectedDate.getSeconds(),2):"ymdSlash"==t?selectedDate.getFullYear()+"/"+padZero(selectedDate.getMonth()+1,2)+"/"+padZero(selectedDate.getDate(),2):void 0)}function getNextMonday(e){const t=new Date(e.getTime()),a=new Date(t.setDate(t.getDate()+((7-t.getDay()+1)%7||7)));return a}function formatAMPM(e){let t=e.getHours(),a=e.getMinutes(),s=t>=12?"pm":"am";t%=12,t=t||12,a=a<10?"0"+a:a;var o=t+""+s;return o}function checkStartEndDate(e){return startDateVal=document.querySelector(`.${e}[data-field="start"]`).value,endDateVal=document.querySelector(`.${e}[data-field="end"]`).value,correctDate=!0,startDateVal&&endDateVal&&new Date(startDateVal)>new Date(endDateVal)&&(Swal.fire("Hold on!","End date cannot be less then start date","info"),document.querySelector(`.${e}[data-field="start"]`).value=endDateVal,correctDate=!1),correctDate}function convertTimeToDate(e,t,a){let s=new Date(e),o=new Date(t),n=o-s,l=(o.getTime()-s.getTime())/1e3,r=n/6e4,i=r/60,d=i/24,c=d/7,u=c/4.3,m=u/12,p=m/10;return"hours"==a?i:"seconds"==a?l:"minutes"==a?r:"days"==a?d:"weeks"==a?c:"months"==a?u:"years"==a?m:"decades"==a?p:void 0}function secondsToTime(e,t){return h=Math.floor(e/3600),m=Math.floor(e%3600/60),s=Math.floor(e%60),t?`${h.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:h>=1?h+" hour(s)":m>=1?m+" minute(s)":s+" second(s)"}function minutesToSeconds(e){return parseInt(60*e)}function thousandFormat(e,t,a){e=e.toString().replace(".",",");var s=e.replace(/[^,\d]/g,"").toString(),o=s.split(","),n=o[0].length%3,l=o[0].substr(0,n),r=o[0].substr(n).match(/\d{3}/gi);return r&&(separator=n?".":"",l+=separator+r.join(".")),""!=a&&a||(a="Rp."),l=null!=o[1]?l+","+o[1]:l,null==t?l:l?a+" "+l:""}function autoLogout(){idleTime+=1,console.log(idleTime),idleTime>10&&(openModal(defaultModals[0]),countDownLogoutInterval=setInterval(()=>{countdownSession--,document.querySelector("#timer-keep-login b").innerHTML=countdownSession,0==countdownSession&&(window.location="/logout?isTimeout=yes")},1e3))}function keepLogin(){clearInterval(countDownLogoutInterval),cdLogoutTimer=10,idleTime=0,closeModal()}function toggleSidebar(e,t){mainSection.classList.remove("fixed","expand"),mainSidebar.classList.remove("expand"),"expand"==t?(mainSection.classList.add("expand"),e.innerHTML='<i class="bx bxs-book-content centerized-sidebar"></i><span class="expanded-sidebar"">Fixed</span>',e.setAttribute("value","fixed")):"fixed"==t?(mainSection.classList.add("fixed"),mainSidebar.classList.add("expand"),e.innerHTML='<i class="fas fa-angle-double-left centerized-sidebar"></i><span class="expanded-sidebar"> Shrink</span>',e.setAttribute("value","shrink")):"shrink"==t&&(e.setAttribute("value","expand"),e.innerHTML='<i class="fas fa-angle-double-right centerized-sidebar"></i><span class="expanded-sidebar"> Expand</span>')}function loadLoader(){fetch(urlToTemplate+"/doLoader.html").then(e=>e.text()).then(e=>document.getElementById("doLoader").innerHTML=e)}function loadSlidebar(){fetch(urlToTemplate+"/mainSlideBar.html").then(e=>e.text()).then(e=>document.getElementById("mainSlideBar").innerHTML=e).then(e=>{setInterval(loadLogActivities,6e4);loadLogActivities(),loadData("loadSettings").done(function(e){settingLists=e,timerSession=settingLists[0].timer_session,countdownSession=settingLists[0].countdown_session,runningTextDashboard=settingLists[0].running_text,document.querySelector("#timer-session").value=timerSession,document.querySelector("#countdown-session").value=countdownSession,document.querySelector("#broadcast-section").innerHTML=`<i class="fas fa-bullhorn"></i>    ${runningTextDashboard}`,idleInterval=setInterval(autoLogout,1e3*minutesToSeconds(timerSession)/10)}).then(e=>{"EP00"!=userInfo.Group_position&&document.querySelector("#general-settings-section").remove()}),loadData("loadUserSettings",{username:userInfo.Username,id:userInfo.Id}).done(function(e){userSettingLists=e,selectedSlideshow=userSettingLists[0].selected_slideshow,selectedTheme=userSettingLists[0].selected_theme,sidebarMode=userSettingLists[0].selected_sidebar,document.querySelector('.opt-slideshow-setting[value="'+selectedSlideshow+'"]').classList.add("active"),document.querySelector('.opt-theme-setting[value="'+selectedTheme+'"]').classList.add("active"),document.querySelector('.opt-sidebar-setting[value="'+sidebarMode+'"]').classList.add("active"),toggleSidebar(document.querySelector("#toggle-sidebar"),sidebarMode),mainSidebar.onmouseenter=function(e){mainSection.classList.contains("expand")&&mainSidebar.classList.add("expand")},mainSidebar.onmouseleave=function(e){mainSection.classList.contains("expand")&&mainSidebar.classList.remove("expand")},document.querySelector("#slidebar-user-info-img").setAttribute("src",`../../assets/images/employee_pictures/${userInfo.Username}.jpg`),document.querySelector("#slidebar-user-info-img").addEventListener("error",function(){this.setAttribute("src","../../assets/svgs/user-male.svg")})})})}function loadSidebar(){fetch(urlToTemplate+"/mainSidebar.html").then(e=>e.text()).then(e=>document.getElementById("mainSidebar").innerHTML=e).then(e=>{mainMenus=document.querySelector("#nav-main-menu"),userInfo={Id:$("#user-Id").val(),Name:$("#user-Name").val(),Username:$("#user-Username").val(),Email:$("#user-Email").val(),Group_position:$("#user-Group_position").val(),Project_company:$("#user-Project_company").val(),Position_name:$("#user-Position_name").val(),Company_id:$("#user-Company_id").val(),Company_alias:$("#user-Company_alias").val(),Company_name:$("#user-Company_name").val(),Project_alias:$("#user-Project_alias").val(),Project_name:$("#user-Project_name").val(),Dashboard_set:$("#user-Dashboard_set").val()},loadSlidebar()}).then(e=>{createMenu()}).then(e=>{loadHeader()})}function loadHeader(){fetch(urlToTemplate+"/mainHeader.html").then(e=>e.text()).then(e=>document.getElementById("mainHeader").innerHTML=e).then(()=>{mainHeader.querySelector("#header-user-info-name").innerHTML=userInfo.Name.split(" ")[0],buildingFilterHeader=document.querySelector("#building-opt-dashboard"),setDefaultModal(),loadFloating(),titleHeader=document.querySelector("#title-content-header"),themeButton=document.querySelector("#change-theme-button"),mainSlideBar.querySelector("#slidebar-user-info-name").innerHTML="Hi, "+userInfo.Name.split(" ")[0]})}function openVerifyPassword(e,t){showSlidebar(),openModal(defaultModals[1]),document.querySelector("#verify-password").value=t,document.querySelector("#set-user-password").value="","change-password-default"==t&&(document.querySelector("#modal-verify-password-info").innerHTML="Verify your password before change <b> default password </b> for all users.")}function loadFloating(){fetch(urlToTemplate+"/doFloating.html").then(e=>e.text()).then(e=>document.getElementById("doFloating").innerHTML=e)}function goLogout(){Swal.fire({title:"Hold on!",text:"Are you sure to logout?",icon:"info",showCancelButton:!0,confirmButtonColor:colorThemes["b7-clr-org-1"],cancelButtonColor:colorThemes["b7-clr-blu-2"],confirmButtonText:"Yes!",confirmButtonText:'<i class="fas fa-power-off"></i> Yes, log out!',confirmButtonAriaLabel:"Log out!",cancelButtonText:'<i class="fa fa-times"></i> Cancel.',cancelButtonAriaLabel:"Cancel"}).then(e=>{e.isConfirmed?window.location="/logout":e.dismiss===Swal.DismissReason.cancel&&Swal.fire("Cancelled","Cancel to logout.","info")})}function setAndremoveClassActive(e,t,a,s,o,n){if(n||(n="active"),elClassLists=e.closest(a).querySelectorAll(t),s&&(elClassLists=e.closest(a).parentElement.querySelectorAll(a)),elClassLists.forEach(e=>{e.classList.remove(n)}),o)return!1;s?e.closest(a).classList.add(n):e.classList.add(n)}function loadContent(e,t,a,s){if(!checkPrivileged("view",a))return!1;fileContentLoc=urlToViews+"/"+a+"/"+a,fileContentLocNull=urlToViews+"/null/null",checkMenu=!0,fetch(fileContentLoc+".html").then(e=>e.text()).then(e=>{e.includes("not found")||e.includes("404")?(Swal.fire("Sorry.","This menu are still on development.","info"),checkMenu=!1):document.getElementById("mainContent").innerHTML=e}).then(()=>{checkMenu&&(s?(menuSelected=e,document.querySelectorAll(".wrap-sub-menu").forEach(e=>{e.classList.remove("open")}),e.classList.contains("sub-menu")&&(menuSelected=document.querySelector(`#menu-${e.getAttribute("data-parent")}`),setAndremoveClassActive(document.querySelector(`#wrap-sub-menu-${e.getAttribute("data-parent")}`),".wrap-sub-menu","#nav-main-menu",!1,!1,"open"),mainSidebar.classList.contains("expand")||setAndremoveClassActive(document.querySelector(`#wrap-sub-menu-${e.getAttribute("data-parent")}`),".wrap-sub-menu","#nav-main-menu",!1,!0,"open")),setAndremoveClassActive(e,".sub-menu","#nav-main-menu",!1),setAndremoveClassActive(menuSelected,".main-menu","#nav-main-menu",!1),setAndremoveClassActive(menuSelected,".main-menu","#nav-main-menu",!1,!1,"open"),mainSidebar.classList.contains("expand")||setAndremoveClassActive(menuSelected,".main-menu","#nav-main-menu",!1,!0,"open"),mainSection.classList.remove("openSubMenu")):setAndremoveClassActive(e,".sub-menu",".wrap-sub-menu",!1),"dashboard"!=a&&(clearInterval(randomizePeopleCounterInterval),clearInterval(randomizeLogDashboardInterval),clearInterval(intervalRealtime)),$(".stylesheet-menu").remove(),$(".script-menu").remove(),openLoader(),mainHeader.className="",mainHeader.classList.add("header-"+a),document.querySelector(".content-wrap").id="content-"+a,addStylesheet("stylesheet-"+a,fileContentLoc+".css","menu"),addScripts("script-"+a,fileContentLoc+".js","menu"),titleHeader.innerHTML=e.getAttribute("title-main-menu"))}).then(()=>{setTimeout(function(){closeLoader()},300),document.getElementById("mainSidebar").classList.contains("active")&&sidebarMobileMenu()}).catch(e=>{Swal.fire("Sorry.","This menu are still on development.","info"),closeLoader()})}function createMenu(){loadData("loadUserMenu",{userGroup:userInfo.Group_position}).done(function(e){currentUserMenuLevel=e,$.ajax({url:"getMenus",type:"GET",dataType:"json",success:function(e){let t=e.filter(e=>0==e.parent);$.each(t,function(t,a){allowed="not-allowed","settings"!=a.code&&"1"==currentUserMenuLevel[a.code].View&&(allowed="allowed","folder"==a.type?onclickNav="onclick=\"openSubMenu(this, '', '"+a.code+"')\"":onclickNav="onclick=\"loadContent(this, '', '"+a.code+"', true)\"",$("#mainSidebar").find("#nav-main-menu").append(`<button title-main-menu="${a.name}" value="show" ${onclickNav} class="${allowed} main-menu ${a.type} centerized-sidebar" id="menu-${a.code}"></button>`).find(`#menu-${a.code}`).append(`<i class="icon-menu ${a.icon}"></i>`).append(`<span class="expanded-sidebar title-menu">${a.name}</span>`),"folder"==a.type&&($("#mainSidebar").find("#nav-main-menu").find(`#menu-${a.code}`).append('<i class="expanded-sidebar dropdown-down fas fa-angle-down"></i>').append('<i class="expanded-sidebar dropdown-up fas fa-angle-up"></i>'),$("#mainSidebar").find("#nav-main-menu").append(`<section title-main-menu="${a.name}" value="show" class="${allowed} wrap-sub-menu ${a.type}" id="wrap-sub-menu-${a.code}"><label class="title-wrap-sub-menu">${a.name}</label></section>`)),console.log("createmenu",e),filterParent=e.filter(e=>e.parent==a.id),menuLists[a.code]=a,menuLists[a.code].children={},allowedChildren=1,Object.keys(filterParent).length>0&&(allowedChildren=0),$.each(filterParent,function(e,t){menuLists[a.code].children[t.code]=t,"1"==currentUserMenuLevel[t.code].View&&allowedChildren++,allowed="not-allowed","1"==currentUserMenuLevel[t.code].View&&(allowed="allowed"),onclickNav="onclick=\"loadContent(this, '', '"+t.code+"', true)\"",$("#mainSidebar").find("#nav-main-menu").find(`#wrap-sub-menu-${a.code}`).append(`<button title-main-menu="${t.name}" data-parent="${a.code}" value="show" ${onclickNav} class="${allowed} sub-menu ${t.type} centerized-sidebar" id="sub-menu-${t.code}"></button>`).find(`#sub-menu-${t.code}`).append(`<span class="expanded-sidebar title-menu">${t.name}</span>`)}),allowedChildren<1&&$("#mainSidebar").find("#nav-main-menu .main-menu:last").removeClass("allowed").addClass("not-allowed"))})},complete:function(){slidebarButton=document.querySelector("#show-hide-slidebar"),mainMenus.querySelector(".main-menu:nth-child(1)").click(),document.querySelectorAll(".main-menu").forEach(e=>{e.onmouseenter=function(){mainSidebar.classList.contains("expand")||showTooltipSidebar(this)},e.onmouseleave=function(){mainSidebar.classList.contains("expand")||removeTooltipSidebar()}}),"EP00"!=userInfo.Group_position&&(console.log("REMOVE"),document.querySelector("#menu-mst").remove(),document.querySelector("#wrap-sub-menu-mst").remove(),document.querySelector("#menu-user").remove(),document.querySelector("#wrap-sub-menu-user").remove(),document.querySelector("#menu-log_trail").remove())}})})}function openSubMenu(e,t,a,s){document.querySelectorAll(".main-menu.open").length>0&&document.querySelectorAll(".main-menu.open, .wrap-sub-menu.open").forEach(e=>{e.getAttribute("id").includes(a)||e.classList.remove("open")}),e.classList.toggle("open"),e.classList.contains("open")?document.querySelector(`#wrap-sub-menu-${a}`).classList.add("open"):(document.querySelectorAll(".main-menu.folder").forEach(e=>{e.classList.remove("open")}),document.querySelectorAll(".wrap-sub-menu").forEach(e=>{e.classList.remove("open")})),e.classList.contains("open")&&!document.querySelector("#nav-main-menu").classList.contains("expand")&&(mainTopHeight=e.offsetTop,subMenuCount=document.querySelectorAll(`#wrap-sub-menu-${a} button`).length,wrapHeight=document.querySelector(`#wrap-sub-menu-${a}`).offsetHeight/2/parseInt(subMenuCount)-10*parseInt(subMenuCount-1),console.log(mainTopHeight,document.querySelector(`#wrap-sub-menu-${a}`).offsetHeight,2,parseInt(subMenuCount),"-",10*parseInt(subMenuCount-1)),document.querySelector(`#wrap-sub-menu-${a}`).style.top=`calc(${mainTopHeight}px + ${wrapHeight}px)`)}function showTooltipSidebar(e){pos1=e.offsetTop,pos2=e.offsetLeft,mainSection.querySelector("#tooltip-sidebar").innerText=e.getAttribute("title-main-menu"),mainSection.querySelector("#tooltip-sidebar").style.top=`calc(${pos1}px + .1em)`,mainSection.querySelector("#tooltip-sidebar").style.left=`calc(${pos2}px + 4em)`,mainSection.querySelector("#tooltip-sidebar").style.visibility="visible",mainSection.querySelector("#tooltip-sidebar").style.zIndex="99"}function removeTooltipSidebar(){mainSection.querySelector("#tooltip-sidebar").style.visibility="hidden",mainSection.querySelector("#tooltip-sidebar").style.left="-100%",mainSection.querySelector("#tooltip-sidebar").style.zIndex="0"}function loadData(e,t){return $.ajax({type:"POST",url:e,data:t,dataType:"JSON",success:function(e){}})}function setTimerSession(){window.clearTimeout(timeOutSession),timeOutSession=window.setTimeout(function(){window.location="/logout"},18e5)}function resetTimerSession(){clearTimeout(timeOutSession)}function addStylesheet(e,t,a){var s=document.createElement("link");s.href=t,s.rel="stylesheet",s.id=e,s.className="",a&&(s.className="stylesheet-menu"),document.getElementsByTagName("head")[0].appendChild(s)}function addScripts(e,t,a){var s=document.createElement("script");s.src=t,s.id=e,s.className="",a&&(s.className="script-menu"),document.getElementsByTagName("body")[0].appendChild(s)}function refreshMenu(){$(".main-menu .active:last").trigger("click")}function scrollUp(){window.scrollTo(0,0)}function scrollDown(){window.scrollTo(0,document.body.scrollHeight)}function openLoader(){$("#doLoader").css("z-index","150").css("opacity","1"),setLoader($("#doLoader #loader-box"))}function closeLoader(){$("#doLoader").css("z-index","-150").css("opacity","0")}function setLoader(e){if(type=loadersLib[Math.floor(Math.random()*loadersLib.length)],e.removeClass().empty().append('<div class="'+type+'"></div>'),"loader-diamonds"==type)for(let t=1;t<=4;t++)e.find("."+type).append('<div class="diamond diamond-'+t+'"></div>');if("loader-double-pulse"==type){e.addClass("loader-box-double-pulse");for(let t=1;t<=2;t++)e.find("."+type).append('<div class="double-pulse"></div>')}if("loader-rectangle-bounce"==type)for(let t=1;t<=5;t++)e.find("."+type).append('<div class="rect-'+t+'"></div>');if("loader-three-dots"==type)for(let t=1;t<=3;t++)e.find("."+type).append('<div class="three three-'+t+'"></div>');if("loader-cubes"==type)for(let t=1;t<=9;t++)e.find("."+type).append('<div class="cube cube-'+t+'"></div>')}function setBasicHeaderFooterTable(e,t,a){e.empty().append("<tr></tr>"),$.each(t,function(t,s){e.find("tr:last").append('<th class="'+a+"-"+t+'">'+s+"</th>")})}function setTemplateCols(e){let t="";return $.each(e,function(e,a){t+='<td class="col-'+e+'"></td>'}),t}function hideColumnsJQ(e,t){$.each(t,function(t,a){e.find(".col-"+a).hide(),e.find(".head-"+a).hide()})}function hideColumns(e,t){for(col of t)e.querySelectorAll(".col-"+col).forEach(e=>{e.style.display="none"}),e.querySelectorAll(".head-"+col).forEach(e=>{e.style.display="none"})}function setListsBasicDatatable(e){for(table of e)setBasicDatatable(tablesColumn[table],table,!0,!1,!1,!1,!1)}function setBasicDatatable(e,t,a,s,o,n,l){l=l?".":"#",a&&setBasicHeaderFooterTable($(l+t+" thead"),e,"head"),s&&setBasicHeaderFooterTable($(l+t+" tfoot"),e,"foot"),o&&setSearch($("#card-"+t+" .search-bar"),t),n&&setRowsPerPage($("#card-"+t+" .row-page"),t)}function setBasicDataTablePlugin(e,t,a,s){a||(a=10),t||(t=!1),buttonDownload=[],s||(buttonDownload=["excelHtml5","csvHtml5",{extend:"pdfHtml5",orientation:"landscape",pageSize:"LEGAL"}]),datatable=e.DataTable({pageLength:a,lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],dom:"lBfrtip",buttons:buttonDownload,destroy:!0,scrollX:!0,select:t,responsive:!1,processing:!0,serverSide:!1,PaginationType:"full_numbers",language:{processing:"<div></div><div></div><div></div>"}})}function fillModalContent(e){const t=doModal,a=".default-modal";t.querySelectorAll(".modal:not("+a+")").forEach(e=>e.remove()),e.forEach(e=>{const a=document.querySelector(e);a&&t.prepend(a)})}function openModal(e){const t=documentSection[0];if(t.style.overflow="hidden",doModal.style.left="0px",doModal.querySelectorAll(".modal").forEach(e=>e.style.display="none"),e){const t=doModal.querySelector(e);t&&(t.style.display="block")}}function triggerClickModal(){mainSection.classList.contains("show-slidebar")&&showSlidebar()}function closeModal(){const e=documentSection[0];e.style.overflow="unset",doModal.style.left="-100%",doModal.querySelectorAll("input, select, textarea").forEach(e=>{e.value=""}),doModal.querySelectorAll(".modal").forEach(e=>e.style.display="none")}function showSlidebar(e,t){return bodySection.setAttribute("swal-slidebar","no"),"hide"!=t&&t?e.classList.contains("dashboard-only")?(Swal.fire("Hold on!","Go back to dashboard to see any alerts.","info"),!1):(closeModal(),mainSection.classList.toggle("show-slidebar"),mainSection.classList.contains("show-slidebar")&&($("#doModal").css("left","0px"),bodySection.setAttribute("swal-slidebar","yes")),document.querySelectorAll(".slidebar-main-section").forEach(e=>{e.style.display="none"}),t&&(document.querySelector(`#${t}-slidebar-section`).style.display="grid"),slidebarTitle=e.getAttribute("data-title"),slidebarIcon=e.querySelector("i").outerHTML,"favorite"==t&&document.querySelectorAll(".favorite-floor-filter")[0].click(),void(document.querySelector("#slidebar-title").innerHTML=slidebarIcon+""+slidebarTitle)):(mainSection.classList.remove("show-slidebar"),closeModal(),!1)}function loadLogActivities(e){logNoData=document.querySelector("#log-slidebar-no-data"),logLists=document.querySelector("#log-slidebar-lists"),$.ajax({url:"loadLogTrail",type:"GET",dataType:"JSON",data:{date:e},beforeSend:function(){logNoData.style.display="grid",logLists.style.display="none",logLists.style.opacity="0",logLists.innerHTML=""},success:function(e){if(Object.keys(e).length>0){logNoData.style.display="none",logLists.style.display="grid",document.querySelector("#log-slidebar-count").innerHTML=`<b>${Object.keys(e).length}</b> activities for today.`;for(const t in e)logLists.innerHTML+='<section class="log-slidebar-box"></section>',logLists.querySelector(".log-slidebar-box:last-child").innerHTML+='<img class="log-slidebar-img" alt="">',logLists.querySelector(".log-slidebar-box:last-child").innerHTML+=`<span class="log-slidebar-name" >${e[t].name}</span>`,logLists.querySelector(".log-slidebar-box:last-child").innerHTML+=`<span class="log-slidebar-time" >${e[t].log_time}</span>`,logLists.querySelector(".log-slidebar-box:last-child").innerHTML+="<hr></hr>",logLists.querySelector(".log-slidebar-box:last-child").innerHTML+=`<span class="log-slidebar-menu" >${e[t].menu}</span>`,logLists.querySelector(".log-slidebar-box:last-child").innerHTML+=`<span class="log-slidebar-activity" >${e[t].activity_desc}</span>`,document.querySelector(".log-slidebar-box:last-child .log-slidebar-img").setAttribute("src",`../../assets/images/employee_pictures/${e[t].username}.jpg`),iconStatus='<i class="fa fa-check-circle"></i>',"success"!=e[t].info&&(iconStatus='<i class="fa fa-times-circle"></i>'),logLists.querySelector(".log-slidebar-box:last-child").innerHTML+=`<span class="${e[t].info} log-slidebar-info" >${iconStatus} <span>${firstUppercase(e[t].info)}</span></span>`}},complete:function(){setTimeout(()=>{logLists.style.opacity="1",document.querySelectorAll(".log-slidebar-box .log-slidebar-img").forEach(e=>{e.addEventListener("error",function(){this.setAttribute("src","../../assets/svgs/user-male.svg")})})},50)}})}function setPluginSelect2(e,t,a){$(e).select2(),$(e).select2("destroy"),$(e).select2(),t&&$(e).parent().find(".select2").css("width",t),a&&$(e).select2({disabled:"readonly"})}function padZero(e,t){if(nLength=e.toString().length,nLength<t)for(padIncrment=0;padIncrment<t-nLength;padIncrment++)e="0"+e;return e}function firstUppercase(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function setTitleCase(e){titleCase="";for(const t of e.split(" "))titleCase+=`${firstUppercase(t.toLowerCase())} `;return titleCase}function setZoomContent(){$(".zoomContent").css("zoom",zoomLevel+"%"),$(".zoomContent").css("zoom",parseFloat(zoomLevel/100)),$(".zoomContent").css("-moz-transform",scale(parseFloat(zoomLevel/100),parseFloat(zoomLevel/100)))}function scale(e,t){return"scale("+e+","+t+")"}function checkPrivileged(e,t,a){return allowed=!1,"1"==currentUserMenuLevel[t][firstUppercase(e)]&&(allowed=!0),allowed||a?allowed:(Swal.fire("Sorry..","You're not authorized to "+e+" on this menu.","info"),!1)}function openChangePass(){"guest"!=userInfo.Group_position&&(openModal(defaultModals[2]),document.querySelectorAll(".form-pass input").forEach(e=>{e.value=""}),modalChangePass.setAttribute("data-act","individual"),modalChangePass.querySelector("#change-pass-username").innerHTML=`Change Password for ${userInfo.Name}`,modalChangePass.querySelector("#set-change-password-button").value="individual",modalChangePass.querySelector("#set-user-old-password").setAttribute("onchange","checkPass(this, this.value, 'individual')"))}function checkPass(e,t,a){username="individual"==a?userInfo.Username:"default-password"==a?a:e.closest(".user-card.active").getAttribute("data-user"),$.ajax({url:"checkPass",method:"POST",dataType:"JSON",data:{username:username,oldPass:t},success:function(t){"incorrect"==t&&(Swal.fire("Incorrect!","Please input correct password first!","warning"),$(e).val("").focus())}})}function checkPassStd(e,t){!(t.length<6)&&hasUpperLowerCase(t,"lower")&&hasUpperLowerCase(t,"upper")&&hasNumber(t)||Swal.fire("Hold on!","Password must be 6 characters. Contains lowercase, uppercase and numeric.","info"),e.value}function hasUpperLowerCase(e,t){return"lower"==t?e.toUpperCase()!=e:"upper"==t?e.toLowerCase()!=e:void 0}function hasNumber(e){return/\d/.test(e)}function changePassIndividualHandler(e){return document.querySelector("#set-user-old-password").onchange(),oldPass=document.querySelector("#set-user-old-password").value,newPass=document.querySelector("#set-user-new-password").value,retypePass=document.querySelector("#set-user-retype-password").value,""==oldPass||""==newPass||""==retypePass?(Swal.fire("Hold on!","Please input all field first!","warning"),!1):newPass!=retypePass?(Swal.fire("Hold on!","New password and retype new password did not match!","warning"),!1):(username=userInfo.Username,"default-password"==e&&(username=e),void $.ajax({url:"changePass",method:"POST",dataType:"JSON",data:{id:userInfo.Id,username:username,newPass:newPass},beforeSend:function(){openLoader()},success:function(e){"failed"==e?Swal.fire("Failed!","Failed to change passowrd!","warning"):(closeModal(),Swal.fire("Success!","Success updated a new password.","success"))},complete:function(){closeLoader()}}))}function verifyPassword(e,t){setTimeout(()=>{document.querySelector("#set-user-password").onchange()},2e3),document.querySelector("#set-user-password").value&&"change-password-default"==t&&(openModal(defaultModals[2]),modalChangePass.querySelector("#set-user-old-password").value="",modalChangePass.querySelector("#set-user-new-password").value="",modalChangePass.querySelector("#set-user-retype-password").value="",modalChangePass.setAttribute("data-act","default-password"),modalChangePass.querySelector("#change-pass-username").innerHTML="Change <b>default password</b> for all users",modalChangePass.querySelector("#set-change-password-button").value="default-password",modalChangePass.querySelector("#set-user-old-password").setAttribute("onchange","checkPass(this, this.value, 'default-password')"),modalChangePass.querySelector("#change-password-default-button").style.display="none")}function seePassIndividualHandler(e,t){e.querySelector("i").setAttribute("class",""),"see"==t?(e.value="show",e.querySelector("i").classList.add("fa","fa-eye"),e.classList.add("active"),e.closest(".form-pass").querySelector("input").setAttribute("type","text")):(e.value="hide",e.classList.remove("active"),e.querySelector("i").classList.add("fa","fa-eye-slash"),e.closest(".form-pass").querySelector("input").setAttribute("type","password"))}function openChangePict(){openModal(defaultModals[3]),modalChangePhoto.querySelector("#change-pict-preview").setAttribute("src",document.querySelector("#header-user-info-img").getAttribute("src")),modalChangePhoto.querySelector("#change-pict-preview").addEventListener("error",function(){this.setAttribute("src","../../assets/svgs/user-male.svg")})}function changePictEmployee(e){if(changePictureEmployeeValue=e.files[0],!changePictureEmployeeValue.type.includes("image"))return Swal.fire("Hold on!","Upload image only.","info"),!1;document.querySelector("#change-pict-preview").setAttribute("src",URL.createObjectURL(changePictureEmployeeValue)),document.querySelector("#change-pict").value=""}function changePictureEmployee(){pictureData=new FormData,nameFileOld="none",nameFileOldSplit="none",document.querySelector("#header-user-info-img").getAttribute("src").includes("employee_pictures")&&(nameFileOld=document.querySelector("#header-user-info-img").getAttribute("src").split("employee_pictures/"),nameFileOldSplit=nameFileOld[1].split("?")[0]),pictureData.append("fileOld",nameFileOldSplit),pictureData.append("fileNew",changePictureEmployeeValue.name),pictureData.append("fileExt",changePictureEmployeeValue.name.split(".")[1]),pictureData.append("file",changePictureEmployeeValue),pictureData.append("username",userInfo.Username),pictureData.append("name",userInfo.Name),Swal.fire({title:"Hold on!",text:"Are you sure to change it?",icon:"info",showCancelButton:!0,confirmButtonColor:colorThemes["mtb-clr-blu-1"],cancelButtonColor:colorThemes["mtb-clr-red-2"],confirmButtonText:"Yes, change it!"}).then(e=>{e.isConfirmed?$.ajax({url:"changePictureEmployee",type:"POST",processData:!1,contentType:!1,data:pictureData,beforeSend:function(){openLoader()},success:function(e){"success"==e?(Swal.fire("Success","Success to change picture","success"),console.log(changePictureEmployeeValue.name)):Swal.fire("Failed","Failed to change picture","warning")},complete:function(){closeLoader(),closeModal(),document.querySelector("#header-user-info-img").setAttribute("src",`../../assets/images/employee_pictures/${userInfo.Username}.jpg`),document.querySelector("#header-user-info-img").addEventListener("error",function(){this.setAttribute("src","../../assets/svgs/user-male.svg")}),document.querySelector("#slidebar-user-info-img").setAttribute("src",`../../assets/images/employee_pictures/${userInfo.Username}.jpg`),document.querySelector("#slidebar-user-info-img").addEventListener("error",function(){this.setAttribute("src","../../assets/svgs/user-male.svg")})}}):e.dismiss===Swal.DismissReason.cancel&&Swal.fire("Cancelled","Cancel to change picture","info")})}function isEven(e){return e%2==0}function isOdd(e){return 1==Math.abs(e%2)}function getRandomRangeNumber(e,t){
return Math.random()*(t-e)+e}function stillOnDevelopment(){Swal.fire({title:"Sorry..",text:"This feature / menu are still in development.",imageUrl:"/assets/svgs/waiting.png",imageWidth:"400px",imageAlt:"Custom image"})}function dragElement(e){function t(e){e=e||window.event,e.preventDefault(),l=e.clientX,r=e.clientY,document.onmouseup=s,document.onmousemove=a}function a(t){t=t||window.event,t.preventDefault(),o=l-t.clientX,n=r-t.clientY,l=t.clientX,r=t.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-o+"px",e.setAttribute("data-top",e.offsetTop-n),e.setAttribute("data-left",e.offsetLeft-o)}function s(){document.onmouseup=null,document.onmousemove=null}e.setAttribute("data-left",e.offsetLeft),e.setAttribute("data-top",e.offsetTop);var o=0,n=0,l=0,r=0;document.getElementById(e.id)?document.getElementById(e.id).onmousedown=t:e.onmousedown=t}function changeTimerSession(e,t){if(selectedTimerAct=timerSession,textTitle="Timer Session",textQ="timer before auto logout",textTime="minute(s)","countdown"==t&&(textTitle="Countdown Session",textQ="countdown before auto logout",selectedTimerAct=countdownSession,textTime="second(s)"),!e.value)return e.value=selectedTimerAct,!1;infoSwal=`<span>${textTitle} Before : <b> ${selectedTimerAct} ${textTime}</b></span><br> `,infoSwal+=`<span>${textTitle} After : <b> ${e.value} ${textTime}</b></span><br> `,Swal.fire({title:"Hold on!",html:`Are you sure to change ${textQ}? <br><br> ${infoSwal}`,icon:"info",showCancelButton:!0,cancelButtonColor:colorThemes["b7-clr-org-1"],confirmButtonColor:colorThemes["b7-clr-blu-2"],confirmButtonText:"Yes!",confirmButtonText:`<i class="fas fa-power-off"></i> Yes, change ${textTitle.toLowerCase()}!`,confirmButtonAriaLabel:"Change!",cancelButtonText:'<i class="fa fa-times"></i> Cancel.',cancelButtonAriaLabel:"Cancel"}).then(a=>{a.isConfirmed?$.ajax({url:"updateTimerSessionSetting",method:"POST",dataType:"JSON",data:{timeBefore:selectedTimerAct,timeAfter:e.value,act:t.replaceAll("-","_"),textQ:textQ,textTime:textTime},beforeSend:function(){openLoader(),clearInterval(idleInterval)},success:function(a){"success"==a?(Swal.fire({title:"<strong>Success</strong>",icon:"success",html:`Successfully to change ${textQ}! <br><br> ${infoSwal}`}),"timer"==t?(timerSession=e.value,settingLists[0].timer_session=e.value):"countdown"==t&&(countdownSession=e.value,settingLists[0].countdown_session=e.value)):(Swal.fire({title:"<strong>Failed</strong>",icon:"warning",html:`Failed to change ${textQ}! <br><br> ${infoSwal}`}),e.value=selectedTimerAct)},complete:function(){closeLoader(),idleInterval=setInterval(autoLogout,1e3*minutesToSeconds(timerSession)/10)}}):a.dismiss===Swal.DismissReason.cancel&&Swal.fire({title:"<strong>Cancelled!</strong>",icon:"info",html:`Cancel to change ${textQ}! <br><br> ${infoSwal}`})})}function changeUserOptSetting(e,t,a){if(setAndremoveClassActive(e,"."+e.getAttribute("data-class"),"#"+e.parentElement.getAttribute("id")),"slideshow"==a?(valueBefore=selectedSlideshow,selectedSlideshow=t,textTitle="Default slideshow",textQ="default slideshow on dashboard menu"):"theme"==a?(valueBefore=selectedTheme,selectedTheme=t,textTitle="Default Theme",textQ="default theme"):"sidebar"==a?(valueBefore=sidebarMode,sidebarMode=t,textTitle="Default Sidebar Mode",textQ="default sidebar mode"):"type_chart"==a&&(valueBefore=selectedTypeChart,selectedTypeChart=t,textTitle="Default Type Chart Mode",textQ="default type chart mode"),!e.value)return e.value=valueBefore,!1;infoSwal=`<span>${textTitle} Before : <b> ${firstUppercase(valueBefore)}</b></span><br> `,infoSwal+=`<span>${textTitle} After : <b> ${firstUppercase(t)}</b></span><br> `,Swal.fire({title:"Hold on!",html:`Are you sure to change ${textQ}? <br><br> ${infoSwal}`,icon:"info",showCancelButton:!0,cancelButtonColor:colorThemes["b7-clr-org-1"],confirmButtonColor:colorThemes["b7-clr-blu-2"],confirmButtonText:"Yes!",confirmButtonText:`<i class="fas fa-power-off"></i> Yes, change ${textTitle.toLowerCase()}!`,confirmButtonAriaLabel:"Change!",cancelButtonText:'<i class="fa fa-times"></i> Cancel.',cancelButtonAriaLabel:"Cancel"}).then(s=>{s.isConfirmed?$.ajax({url:"updateUserSetting",method:"POST",dataType:"JSON",data:{user_id:userInfo.Id,username:userInfo.Username,valueBefore:valueBefore,valueAfter:t,textQ:textQ,act:a},beforeSend:function(){openLoader()},success:function(s){"success"==s?(Swal.fire({title:"<strong>Success</strong>",icon:"success",html:`Successfully to change ${textQ}! <br><br> ${infoSwal}`}),"theme"==a&&(selectedTheme=t,bodySection.classList.remove("white-theme"),bodySection.classList.add(t)),"slideshow"==a&&(selectedSlideshow=t),"sidebar"==a&&(sidebarMode=t,mainSection.classList.remove("expand","shrink","fixed"),mainSection.classList.add(t),mainSidebar.classList.remove("expand","fixed"),mainSidebar.classList.add("fixed"),"fixed"==t&&mainSidebar.classList.add("expand")),"type_chart"==a&&(selectedTypeChart=t),settingLists[0]["selected_"+a]=t):(Swal.fire({title:"<strong>Failed</strong>",icon:"warning",html:`Failed to change ${textQ}! <br><br> ${infoSwal}`}),e.value=valueBefore)},complete:function(){closeLoader()}}):s.dismiss===Swal.DismissReason.cancel&&Swal.fire({title:"<strong>Cancelled!</strong>",icon:"info",html:`Cancel to change ${textQ}! <br><br> ${infoSwal}`})})}function deleteLogTrail(e){if(pastMonthsDeleteLogTrail=document.querySelector("#delete-log-trail-interval").value,!pastMonthsDeleteLogTrail)return Swal.fire("Hold on!","Please input how many past month(s) first.","info"),!1;textTitle="Delete Log Trail",textQ="delete log trail in past <b>"+pastMonthsDeleteLogTrail+" month(s)</b>",infoSwal=`<span>${firstUppercase(textQ)}</span><br> `,Swal.fire({title:"Hold on!",html:`Are you sure to ${textQ}?`,icon:"info",showCancelButton:!0,cancelButtonColor:colorThemes["b7-clr-org-1"],confirmButtonColor:colorThemes["b7-clr-blu-2"],confirmButtonText:"Yes!",confirmButtonText:`<i class="fas fa-power-off"></i> Yes, ${textTitle.toLowerCase()}!`,confirmButtonAriaLabel:"Change!",cancelButtonText:'<i class="fa fa-times"></i> Cancel.',cancelButtonAriaLabel:"Cancel"}).then(e=>{e.isConfirmed?$.ajax({url:"deleteLogTrail",method:"POST",dataType:"JSON",data:{interval:pastMonthsDeleteLogTrail,textQ:textQ},beforeSend:function(){openLoader()},success:function(e){e.includes("success")||e.includes("info")?(e.split("-")[1]>0?htmlSwal=`Successfully to ${textQ}! <br><br> ${e.split("-")[1]} log trail(s) deleted.`:htmlSwal="There are nothing to delete, there are no data older than "+pastMonthsDeleteLogTrail+" month. ",Swal.fire({title:"<strong>Success</strong>",icon:e.split("-")[0],html:htmlSwal})):Swal.fire({title:"<strong>Failed</strong>",icon:"warning",html:`Failed to ${textQ}! <br><br> ${infoSwal}`})},complete:function(){closeLoader()}}):e.dismiss===Swal.DismissReason.cancel&&Swal.fire({title:"<strong>Cancelled!</strong>",icon:"info",html:`Cancel to ${textQ}! <br><br> ${infoSwal}`})})}function getMostLeastArr(e,t){const a=e.reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{});return"least"==t?Object.keys(a).reduce((e,t)=>a[e]<a[t]?e:t):"most"==t?Object.keys(a).reduce((e,t)=>a[e]>a[t]?e:t):void 0}function checkFieldAreInputed(e){let t=e.filter(e=>""===e).length;return 0===t}function checkFieldAreInputedOnGroup(e,t,a){let s=0;return e=document.querySelector(e),e.querySelectorAll("input, select, textarea").forEach(e=>{exceptionGroupCount=0,a&&e.closest(a)&&(exceptionGroupCount=e.closest(a).querySelectorAll("input, select, textarea").length),t.includes(e.getAttribute("id"))||!(exceptionGroupCount<=0)||e.value&&""!=e.value||s++,console.log(e.getAttribute("id"),s,!t.includes(e.getAttribute("id")))}),!(s>0)}function emptyFields(e,t){e=document.querySelector(e),e.querySelectorAll("input, select, textarea").forEach(e=>{t.includes(e.getAttribute("id"))||(e.value="")})}function getSelectedOptionText(e){return e.options[e.selectedIndex].text}function createCalendar(e,t){t=t?returnSelectedDateConvert(t,"ymd").split("-")[0]+"-"+returnSelectedDateConvert(t,"ymd").split("-")[1]==todayYMD.split("-")[0]+"-"+todayYMD.split("-")[1]?new Date:t:new Date,periode=padZero(t.getMonth()+1,2)+"-"+t.getFullYear(),numberOfDays=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),e.querySelectorAll(".calendar-box").length>0&&e.querySelector(".calendar-box").remove(),e.innerHTML='<table data-period="'+returnSelectedDateConvert(t,"ymd")+'" class="calendar-box"><thead></thead><tbody></tbody></table>',tableCalendar=e.querySelector(".calendar-box"),tableCalendar.querySelector("thead").innerHTML="<tr></tr>";for(let e=0;e<dayNamesStartMon.length;e++)tableCalendar.querySelector("thead tr:last-child").innerHTML+='<td align="center">'+dayNamesStartMon[e]+"</td>";dayPos=1;for(let e=1;e<=numberOfDays;e++){if(dt=new Date(t.getFullYear()+", "+padZero(t.getMonth()+1,2)+", "+e),dayPos>7&&(dayPos=1),1==dayPos++&&(tableCalendar.querySelector("tbody").innerHTML+="<tr></tr>"),0==dt.getDay()||6==dt.getDay()?classDate="weekend":classDate="weekday",1==e)for(let t=0;t<dayNamesStartMon.length;t++){if(dayY=t+1,dayNamesStartMon[dayY]||(dayY=0),dt.getDay()==dayY){tableCalendar.querySelector("tbody tr:last-child").innerHTML+='<td align="center"><button data-day="'+e+'" id="date-'+e+'" class="day '+classDate+'">'+e+"</button></td>";break}tableCalendar.querySelector("tbody tr:last-child").innerHTML+='<td class="not-date"></td>',dayPos++}else tableCalendar.querySelector("tbody tr:last-child").innerHTML+='<td align="center"><button data-day="'+e+'" id="date-'+e+'" class="day '+classDate+'">'+e+"</button></td>";e==t.getDate()&&t.getMonth()==(new Date).getMonth()&&t.getFullYear()==(new Date).getFullYear()&&tableCalendar.querySelector(`button[data-day="${e}"]`).classList.add("today")}}function allowDrop(e){e.preventDefault()}function dragOver(e){e.preventDefault(),rowDrag.classList.add("hidden"),isBeforeDrag(rowDrag,e.target)?e.target.parentNode.insertBefore(rowDrag,e.target):e.target.parentNode.insertBefore(rowDrag,e.target.nextSibling)}function dragEnd(){rowDrag.classList.remove("hidden"),rowDrag=null}function dragStart(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",null),rowDrag=e.target}function isBeforeDrag(e,t){if(e.parentNode===t.parentNode)for(var a=e.previousSibling;a;a=a.previousSibling)if(a===t)return!0;return!1}function getBase64Image(e,t){return new Promise(function(a,s){var o=document.createElement("canvas"),n=o.getContext("2d"),l=new Image;l.src="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(e)),l.onload=function(){o.width=l.width,o.height=l.height,n.drawImage(l,0,0);var e=o.toDataURL("image/jpeg",t);a(e)}})}function exportToExcel(e,t=""){var a="<table border = '1px'><tr>";table=document.getElementById(e);for(let e=0;e<table.rows.length;e++)a=a+table.rows[e].innerHTML+"</tr>";a+="</table>",a=a.replace(/<input[^>]*>|<\/input>/gi,""),t=t?t+".xls":"excel_data.xls";var s="application/vnd.ms-excel";downloadLink=document.createElement("a"),document.body.appendChild(downloadLink),downloadLink.href="data:"+s+", "+encodeURIComponent(a),downloadLink.download=t,downloadLink.click(),document.querySelector("a[download]").remove()}function searchValueFromLists(e,t,a,s,o,n,l){console.log(e);let r=e.toLowerCase();foundOne=!1,t.style.display="none",a.style.display=l,document.querySelectorAll(`.${s}`).forEach(e=>{if(found=!1,e.style.display="none",found)return!0;e.innerText.toLowerCase().indexOf(r)>-1&&(e.style.display=o,found=!0,foundOne=!0)}),foundOne&&(t.style.display=n,a.style.display="none")}function getYearMonthDayFromDays(e,t){let a=Math.floor(e/365),s=Math.floor(e%365/30),o=Math.floor(e%365%30);return t?(text="",a&&(text+=a+" years, "),s&&(text+=s+" months, "),o&&(text+=o+" days"),text):{years:a,months:s,days:o}}function isFirstCharInclude(e,t,a){let s=e.split(" ");if(s.length>0){let e=s[0];if(e.charAt(0)===t)return"remove"!=a||(e=e.substring(1),s[0]=e,s.join(" "),s)}return!1}const documentSection=document.getElementsByTagName("html"),bodySection=document.querySelector("body"),mainSection=document.querySelector("main"),doModal=document.querySelector("#doModal"),mainSlideBar=document.querySelector("#mainSlideBar"),mainSidebar=document.querySelector("#mainSidebar"),mainHeader=document.querySelector("#mainHeader");let settingLists,broadcastTextInfo,runningTextDashboard,timerSession,countdownSession,userSettingLists,selectedSlideshow,selectedTheme,selectedTypeChart,sidebarMode,currentUserMenuLevel,mainMenus,subMenus,titleMainMenu,titleHeader,slidebarButton,themeButton,buildingFilterHeader,slideshowControlPanel,userInfo={},menuLists={},idleInterval="";methodLists={insert:"POST",add:"POST",update:"PUT",delete:"DELETE"};const urlToAssets=window.location.origin+"/assets",urlToTemplate=window.location.origin+"/views/template",urlToViews=window.location.origin+"/views",monthNamesFull=["January","February","March","April","May","June","July","August","September","October","November","December"],monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNamesFull=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesFullStartMon=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dayNamesStartMon=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];let idleTime=0,countDownLogoutInterval="",randomizePeopleCounterInterval="",randomizeLogDashboardInterval="",intervalRealtime="";todayDate();let currentCookie=document.cookie.split("cookie-name=")[1],intervalCheckCookie=void 0;window.addEventListener("blur",function(){intervalCheckCookie=this.setInterval(()=>{document.cookie.split("cookie-name=")[1]!==currentCookie&&(window.location.href="/")},1e3)}),window.addEventListener("focus",function(){this.clearInterval(intervalCheckCookie)});const defaultModals=["#modal-keep-login","#modal-verify-password","#modal-change-password","#modal-change-picture"];modalKeepLogin=document.querySelector(defaultModals[0]),modalVerifyPass=document.querySelector(defaultModals[1]),modalChangePass=document.querySelector(defaultModals[2]),modalChangePhoto=document.querySelector(defaultModals[3]),$(document).mousemove(function(e){idleTime=0}),$(document).keypress(function(e){idleTime=0}),window.onload=function(){loadSidebar(),loadLoader()};const allTheStylesheets={"styleesheets-fa":urlToAssets+"/plugins/font-awesome/css/all.min.css","styleesheets-box-icon":urlToAssets+"/plugins/boxicons-2-1-4/css/boxicons.min.css","styleesheets-bostrap-icon":urlToAssets+"/plugins/bootstrap-icons/font/bootstrap-icons.min.css","styleesheets-remix-icon":urlToAssets+"/plugins/remix-icon/remixicon.css","styleesheets-select2":urlToAssets+"/plugins/select2/select2.min.css","styleesheets-dataTables.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-bs4/css/dataTables.bootstrap4.min.css","styleesheets-responsive.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-responsive/css/responsive.bootstrap4.min.css","styleesheets-select.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-select/css/select.bootstrap4.min.css","styleesheets-buttons.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-buttons/css/buttons.bootstrap4.min.css"},isDev=!1;urlToAssets=window.location.origin+"/assets";const assetPathJs=isDev?"/js":"/js-obfuscated",allTheScripts={"script-doJs":urlToAssets+assetPathJs+"/doJs.js","script-doPdf":urlToAssets+assetPathJs+"/doPdf.js","script-doCharts":urlToAssets+assetPathJs+"/doChart.js","script-sweet-alert2":urlToAssets+"/plugins/sweetalert2/dist/sweetalert2.all.min.js","script-select2":urlToAssets+"/plugins/select2/select2.min.js","script-qrcode":urlToAssets+"/plugins/qrcode/qrcode.min.js","script-jquery-dataTables":urlToAssets+"/plugins/datatables-plugin/datatables/jquery.dataTables.min.js","script-datatables":urlToAssets+"/plugins/datatables-plugin/datatables/datatables.min.js","script-dataTables.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-bs4/js/dataTables.bootstrap4.min.js","script-dataTables.responsive":urlToAssets+"/plugins/datatables-plugin/datatables-responsive/js/dataTables.responsive.min.js","script-responsive.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-responsive/js/responsive.bootstrap4.min.js","script-select.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-select/js/select.bootstrap4.min.js","script-dataTables.select":urlToAssets+"/plugins/datatables-plugin/datatables-select/js/dataTables.select.min.js","script-jspdf":urlToAssets+"/plugins/jspdf/jspdf.umd.min.js","script-pdfjs":"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.0.943/pdf.min.js","script-html2canvas-0-4-1":urlToAssets+"/plugins/html2canvas/html2canvas-0-4-1.min.js","script-jszip":urlToAssets+"/plugins/jszip/jszip.min.js","script-pdfmake":urlToAssets+"/plugins/pdfmake/pdfmake.min.js","html5-qrcode":urlToAssets+"/plugins/html5-qrcode/html5-qrcode.min.js","script-vfs_fonts":urlToAssets+"/plugins/fonts/vfs_fonts.js","script-buttons.dataTable":urlToAssets+"/plugins/datatables-plugin/datatables-buttons/js/dataTables.buttons.min.js","script-buttons.bootstrap4":urlToAssets+"/plugins/datatables-plugin/datatables-buttons/js/buttons.bootstrap4.min.js","script-buttons.html5":urlToAssets+"/plugins/datatables-plugin/datatables-buttons/js/buttons.html5.min.js","script-amchart.index":urlToAssets+"/plugins/amchart/index.js","script-amchart.xy":urlToAssets+"/plugins/amchart/xy.js","script-amchart.animated":urlToAssets+"/plugins/amchart/Animated.js","script-amchart.dark":urlToAssets+"/plugins/amchart/Dark.js","script-amchart.percent":urlToAssets+"/plugins/amchart/Percent.js","script-web.rtc":urlToAssets+"/plugins/unreal-web-rtc/webrtcadapter.js","script-web.rtc-player":urlToAssets+"/plugins/unreal-web-rtc/unrealwebrtcplayer.js","script-chartJs":urlToAssets+"/plugins/chart-js/chart.min.js","script-chartDataLabels":urlToAssets+"/plugins/chartjs-plugin-datalabels/chartjs-plugin-datalabels.min.js","script-JsBarcode-3-11-6":urlToAssets+"/plugins/jsbarcode/JsBarcode-3-11-6.all.min.js"};$.each(allTheScripts,function(e,t){addScripts(e,t)}),$.each(allTheStylesheets,function(e,t){addStylesheet(e,t)});const loadersLib=["loader-diamonds","loader-pulse","loader-double-pulse","loader-circles","loader-three-dots","loader-fade-circle","loader-rectangle","loader-rectangle-bounce","loader-cubes","loader-coffee-cup","loader-timer","loader-circle","loader-typing","loader-location","loader-gauge","loader-battery","loader-square","loader-magnifier","loader-round-around","loader-cloud","loader-simple"];var rowDrag;let html5QrCode,isScanning=!1,currentCamera="environment",scannedValue="";